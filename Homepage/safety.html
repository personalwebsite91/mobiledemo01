<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;900&display=swap" rel="stylesheet">
    <title>SHAKTI-IND Streamlined</title>
    <style>
    :root {
        --background-color: hsl(60, 18%, 97%); /* Same background */
        --text-color: #333;
        --saffron: #FF9933;
        --green: #138808;
        --container-margin: 20px;
        --container-border-radius: 12px;
        --nav-bar-width: 50px; 
        --elegant-bg: #ffffff; 
    }

    body {
        font-family: 'Poppins', sans-serif;
        height: 100vh;
        overflow: hidden;
        position: relative;
        background: var(--background-color);
        transition: background 0.3s ease;
        opacity: 1; /* Keep visible for simplicity */
        transform: scale(1);
    }

    /* Logo Styling - Same position */
    .logo {
        position: fixed;
        top: 24px; 
        left: 24px;
        font-weight: 900;
        font-size: 1rem;
        letter-spacing: 2px;
        background: linear-gradient(90deg, var(--saffron) 50%, var(--green) 50%);
        -webkit-background-clip: text;
        background-clip: text;
        -webkit-text-fill-color: transparent;
        z-index: 20;
    }

    /* --- New Compact User Info Header --- */
    .compact-user-info {
        position: fixed;
        top: 20px; 
        right: 20px; /* Positioned left of the right-nav-bar */
        padding: 8px 15px;
        display: flex;
        align-items: center;
        gap: 15px;
        font-size: 0.9rem;
        font-weight: 500;
        color: var(--text-color);
        z-index: 10;
        
        /* Elegant Style */
        background: var(--elegant-bg);
        border: 1px solid #eee;
        border-radius: 8px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
    }
    
    .info-details {
        display: flex;
        flex-direction: column;
        justify-content: center;
        /* Calculate height based on profile pic + small padding to match the pic length */
        height: 40px; 
        line-height: 1.2;
    }
    
    .info-username {
        font-weight: 700;
        font-size: 0.95rem;
    }
    
    .info-bio {
        font-size: 0.75rem;
        color: #777;
    }

    /* Profile Picture in the new container */
    .info-profile-photo {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        border: 2px solid var(--green);
        flex-shrink: 0;
        /* Placeholder for demo */
        background: #ccc; 
    }

    /* --- Right-Side Vertical Navbar Styling (Maintained) --- */
    .right-nav-bar {
        position: fixed;
        right: var(--container-margin); /* Stick to the right margin */
        top: 100px; 
        height: 77%;
        width: var(--nav-bar-width);
        
        background: var(--elegant-bg);
        border: 1px solid #eee;
        border-radius: var(--container-border-radius);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        padding: 15px 0;
        z-index: 9;
        
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 75px; 
    }

    .nav-item a {
        text-decoration: none;
        color: #aaa;
        font-size: 1.6rem;
        transition: color 0.3s ease, transform 0.2s ease;
        display: block;
    }

    .nav-item a:hover {
        color: var(--saffron);
        transform: scale(1.05);
    }

    </style>
</head>

<body>
    <div class="logo">
        <span class="saffron">SHAKTI</span><span class="green">-IND</span>
    </div>

    <div class="compact-user-info">
        <img id="compactProfilePic" class="info-profile-photo" src="" alt="profile">

        <div class="info-details">
            <div class="info-username" id="compactProfileName">
                Loading...
            </div>
            <div class="info-bio" id="compactProfileBio">
                Loading...
            </div>
        </div>
    </div>

    <div class="right-nav-bar">
        <div class="nav-item">
            <a href="HP2.html" title="Home">üè†</a>
        </div>
        <div class="nav-item">
            <a href="#safety" title="Safety">üö®</a>
        </div>
        <div class="nav-item">
            <a href="#community" title="Community">üë•</a>
        </div>
        <div class="nav-item">
            <a href="./profile_page.html" title="Profile">üë§</a>
        </div>
        <div class="nav-item">
            <a href="#" onclick="openSettings()" title="Settings">‚öôÔ∏è</a>
        </div>
    </div>


<script type="module">
// We must retain the Firebase script to load the user's data for the new container
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getDatabase, ref, get } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js";

const firebaseConfig = {
    apiKey: "AIzaSyDvZYHuZ2NHVrTpS3NhVS0f1wDeW-phZ10",
    authDomain: "shaktiind-31e08.firebaseapp.com",
    databaseURL: "https://shaktiind-31e08-default-rtdb.firebaseio.com",
    projectId: "shaktiind-31e08",
    storageBucket: "shaktiind-31e08.firebasestorage.app",
    messagingSenderId: "394230439792",
    appId: "1:394230439792:web:2178e633cff48093f5b9b5"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

const mobile = localStorage.getItem("logged_user_mobile");

// Load User Data - Modified to use the new compact element IDs
async function loadProfile() {
    const snap = await get(ref(db, "shaktiind/users"));
    if (snap.exists()) {
        const users = snap.val();
        let userData = null;

        for (let k in users) {
            if (users[k].mobile === mobile) {
                userData = users[k];
                break;
            }
        }

        if (userData) {
            document.getElementById("compactProfilePic").src = userData.profilePic;
            document.getElementById("compactProfileName").innerText = userData.username;
            document.getElementById("compactProfileBio").innerText = userData.bio;
            // The full description and full profile card elements have been removed
        }
    }
}

loadProfile();
</script>

<script>
function openSettings() {
    // Since we removed the settings popup, we can alert or redirect instead
    alert("Settings panel functionality is currently disabled in this simplified view.");
    // Or, if you want to redirect to a settings page:
    // window.location.href = "./settings_page.html";
}
</script>

</body>
</html>